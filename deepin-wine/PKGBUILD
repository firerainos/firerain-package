# Maintainer: FIreRain <gdigrgg@gmail.com>
pkgname=deepin-wine
#pkgvers=2.18-5
pkgver=2.18
pkgrel=8
epoch=
pkgdesc="Deepin Wine"
arch=('i686' 'x86_64')
url="http://www.deepin.org"
license=('Proprietary')
groups=()
depends=(deepin-udis86
  fontconfig      lib32-fontconfig
  lcms2           lib32-lcms2
  libxml2         lib32-libxml2
  libxcursor      lib32-libxcursor
  libxrandr       lib32-libxrandr
  libxdamage      lib32-libxdamage
  libxi           lib32-libxi
  gettext         lib32-gettext
  freetype2       lib32-freetype2
  glu             lib32-glu
  libsm           lib32-libsm
  gcc-libs        lib32-gcc-libs
  libpcap         lib32-libpcap
  desktop-file-utils
  p7zip)
makedepends=('tar')
checkdepends=()
optdepends=()
provides=()
conflicts=()
replaces=()
backup=()
options=(!strip)
install=
changelog=
source=("https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/${pkgname}/${pkgname}_${pkgver}-${pkgrel}~rc2_all.deb"
"https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/${pkgname}/deepin-fonts-wine_${pkgver}-${pkgrel}~rc2_all.deb"
"https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/${pkgname}/deepin-wine32-preloader_${pkgver}-${pkgrel}~rc2_i386.deb"
"https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/${pkgname}/deepin-wine32_${pkgver}-${pkgrel}~rc2_i386.deb"
"https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/${pkgname}/deepin-libwine_${pkgver}-${pkgrel}~rc2_i386.deb"
"https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/deepin-wine-helper/deepin-wine-helper_1.0deepin32_i386.deb"
"https://mirrors.ustc.edu.cn/deepin/pool/non-free/d/deepin-wine-uninstaller/deepin-wine-uninstaller_0.1deepin2_i386.deb"
)
noextract=("${pkgname}_${pkgver}-${pkgrel}~rc2_all.deb")
md5sums=('SKIP' 'SKIP' 'SKIP' 'SKIP' 'SKIP' 'SKIP' 'SKIP')
validpgpkeys=()

prepare() {
	rm -rf ${pkgname}-${pkgver}-${pkgrel}
	ar -x ${pkgname}_${pkgver}-${pkgrel}~rc2_all.deb
	mkdir ${pkgname}-${pkgver}-${pkgrel}
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"	
	ar -x deepin-fonts-wine_${pkgver}-${pkgrel}~rc2_all.deb
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"
	ar -x deepin-wine32-preloader_${pkgver}-${pkgrel}~rc2_i386.deb
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"
	ar -x deepin-wine32_${pkgver}-${pkgrel}~rc2_i386.deb
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"
	ar -x deepin-libwine_${pkgver}-${pkgrel}~rc2_i386.deb
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"
	ar -x deepin-wine-helper_1.0deepin32_i386.deb
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"
	ar -x deepin-wine-uninstaller_0.1deepin2_i386.deb
	tar -xf data.tar.xz --directory="${pkgname}-${pkgver}-${pkgrel}"
}

package() {
	cd "${pkgname}-${pkgver}-${pkgrel}"
	cp ./lib ./usr/ -rf
	rm ./lib -rf
	rm ./usr/share/bug -rf
	rm ./usr/share/lintian -rf
	cp -r ./ ${pkgdir}/
}
